import{s as ae,n as I,c as V,o as ve,d as G,b as We}from"../chunks/scheduler.50aa2f44.js";import{S as re,i as ne,g as v,h as m,j as y,f as p,k as x,a as T,y as xe,s as A,A as ye,c as P,l as Ae,e as Pe,C as f,D as Me,m as w,n as O,o as U,r as le,u as ie,v as oe,d as ce,t as de,w as ue,E as Re}from"../chunks/index.f11b7a36.js";import{C as me,f as Ne,a as Te}from"../chunks/Chart.407174b1.js";import{l as _e,a as ee,d as be,r as M}from"../chunks/stores.a6cd9b26.js";import{_ as Ue}from"../chunks/preload-helper.a4192956.js";import{e as je}from"../chunks/each.e59479a4.js";function He(i){let e,t,a;return{c(){e=v("canvas"),this.h()},l(s){e=m(s,"CANVAS",{id:!0}),y(e).forEach(p),this.h()},h(){x(e,"id","visits-chart")},m(s,r){T(s,e,r),t||(a=xe(e,"click",i[0]),t=!0)},p:I,i:I,o:I,d(s){s&&p(e),t=!1,a()}}}function Ie(i,e){return e.day in i?i[e.day].y+=e.sessions:i[e.day]={x:e.dd,y:e.sessions},i}function ze(i,e,t){let a,s,r,o;V(i,_e,c=>t(4,a=c)),V(i,ee,c=>t(5,s=c)),V(i,be,c=>t(6,r=c)),V(i,M,c=>t(7,o=c));let l,n,g,C={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"};ve(async()=>{const c=document.getElementById("visits-chart").getContext("2d");n=new me(c,{type:"line",data:{datasets:[{label:"This week",backgroundColor:"#2171b5",borderColor:"#2171b5",fill:!1,data:[]},{label:"Last week",backgroundColor:"#c6dbef",borderColor:"#c6dbef",fill:!1,borderDash:[10,5],xAxisID:"axisLastWeek",data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{id:"axisThisWeek",type:"time",ticks:{min:0,max:1586e9}},{id:"axisLastWeek",type:"time",display:!1,gridLines:{drawOnChartArea:!1}}],yAxes:[{id:"temp-y-axis",type:"linear",position:"left",scaleLabel:{display:!0,labelString:"Number of sessions"}}]},tooltips:{mode:"nearest",intersect:!1,callbacks:{title(h,b){let{index:_}=h[0],{datasetIndex:D}=h[0],H=b.datasets[D].data[_].x;return`${C[H.getDay()]} ${("0"+H.getDate()).slice(-2)} / ${("0"+(H.getMonth()+1)).slice(-2)} / ${H.getFullYear()}`}}}}})}),M.subscribe(c=>{c.length>0&&n&&(l=c.reduce(Ie,{}),d(Object.values(l),0),Object.values(l).length===1?(n.options.scales.xAxes[0].ticks.min=+Object.values(l)[0].x-3e8,n.options.scales.xAxes[0].ticks.max=+Object.values(l)[0].x+3e8):(n.options.scales.xAxes[0].ticks.min=+Object.values(l)[0].x,n.options.scales.xAxes[0].ticks.max=+Object.values(l)[Object.keys(l).length-1].x),n.update())}),ee.subscribe(c=>{c&&c.length>0&&n&&(g=c.reduce(Ie,{}),d(Object.values(g),1),Object.values(g).length===1?(n.options.scales.xAxes[1].ticks.min=+Object.values(g)[0].x-3e8,n.options.scales.xAxes[1].ticks.max=+Object.values(g)[0].x+3e8):(n.options.scales.xAxes[1].ticks.min=+Object.values(g)[0].x,n.options.scales.xAxes[1].ticks.max=+Object.values(g)[Object.keys(g).length-1].x),n.update())});function d(c,h){n.data.datasets[h].data=c.map(b=>({x:b.x,y:b.y})),n.update()}function u(c){const h=n.getElementsAtEvent(c);if(h[0]){const b=h[0]._index,_=Object.keys(g)[b];G(M,o=r.filter(D=>D.day===_),o),G(ee,s=a.filter(D=>D.day===_),s)}}return[u]}class Fe extends re{constructor(e){super(),ne(this,e,ze,He,ae,{})}}function Ze(i){let e,t,a;return{c(){e=v("canvas"),this.h()},l(s){e=m(s,"CANVAS",{id:!0}),y(e).forEach(p),this.h()},h(){x(e,"id","countries-chart")},m(s,r){T(s,e,r),t||(a=xe(e,"click",i[0]),t=!0)},p:I,i:I,o:I,d(s){s&&p(e),t=!1,a()}}}function qe(i,e,t){let a,s,r,o;V(i,_e,d=>t(3,a=d)),V(i,ee,d=>t(4,s=d)),V(i,be,d=>t(5,r=d)),V(i,M,d=>t(6,o=d));let l,n;ve(async()=>{const d=document.getElementById("countries-chart").getContext("2d");n=new me(d,{type:"bar",data:{labels:[],datasets:[{backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:[]}]},options:{legend:{display:!1},tooltips:{mode:"nearest",intersect:!1},responsive:!0,maintainAspectRatio:!1}})}),M.subscribe(d=>{if(d.length>0&&n){let u=d.reduce((c,h)=>(h.country in c?c[h.country]+=h.sessions:c[h.country]=h.sessions,c),{});l=Object.keys(u).map((c,h)=>({data:u[c],label:c})).sort(function(c,h){return h.data-c.data}).reduce((c,h,b)=>(b>10?"Others"in c?c.Others+=h.data:c.Others=h.data:c[h.label]=h.data,c),{}),g(Object.keys(l),Object.values(l))}});function g(d,u){n.data.labels=d,n.data.datasets[0].data=u,n.update()}function C(d){const u=n.getElementsAtEvent(d);if(u[0]){const c=u[0]._index,h=Object.keys(l)[c];G(M,o=r.filter(b=>b.country===h),o),G(ee,s=a.filter(b=>b.country===h),s)}}return[C]}class Je extends re{constructor(e){super(),ne(this,e,qe,Ze,ae,{})}}function Ye(i){let e,t="Visits per pages:",a,s,r,o;return{c(){e=v("p"),e.textContent=t,a=A(),s=v("canvas"),this.h()},l(l){e=m(l,"P",{"data-svelte-h":!0}),ye(e)!=="svelte-15dyb0z"&&(e.textContent=t),a=P(l),s=m(l,"CANVAS",{id:!0,height:!0}),y(s).forEach(p),this.h()},h(){x(s,"id","pages-chart"),x(s,"height","400px")},m(l,n){T(l,e,n),T(l,a,n),T(l,s,n),r||(o=xe(s,"click",i[0]),r=!0)},p:I,i:I,o:I,d(l){l&&(p(e),p(a),p(s)),r=!1,o()}}}function Ge(i,e,t){let a,s,r,o;V(i,_e,d=>t(3,a=d)),V(i,ee,d=>t(4,s=d)),V(i,be,d=>t(5,r=d)),V(i,M,d=>t(6,o=d));let l,n;ve(async()=>{const d=document.getElementById("pages-chart").getContext("2d");n=new me(d,{type:"horizontalBar",data:{labels:[],datasets:[{label:"",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:[]}]},options:{legend:{display:!1},tooltips:{mode:"nearest",intersect:!1}}})}),M.subscribe(d=>{if(d.length>0&&n){let u=d.reduce((c,h)=>(h.pagePath in c?c[h.pagePath]+=h.sessions:c[h.pagePath]=h.sessions,c),{});l=Object.keys(u).map((c,h)=>({label:c,data:u[c]})).sort(function(c,h){return h.data-c.data}).reduce((c,h,b)=>(b>10?"Others"in c?c.Others+=h.data:c.Others=h.data:c[h.label]=h.data,c),{}),g(Object.keys(l),Object.values(l))}});function g(d,u){n.data.labels=d,n.data.datasets[0].data=u,n.update()}function C(d){const u=n.getElementsAtEvent(d);if(u[0]){const c=u[0]._index,h=Object.keys(l)[c];G(M,o=r.filter(b=>b.pagePath===h),o),G(ee,s=a.filter(b=>b.pagePath===h),s)}}return[C]}class Ke extends re{constructor(e){super(),ne(this,e,Ge,Ye,ae,{})}}const De=globalThis.__sveltekit_fniyac.env;function Qe(i){let e;return{c(){e=v("div"),this.h()},l(t){e=m(t,"DIV",{id:!0,style:!0}),y(e).forEach(p),this.h()},h(){x(e,"id","map"),Ae(e,"width","100%"),Ae(e,"height","400px")},m(t,a){T(t,e,a),i[1](e)},p:I,i:I,o:I,d(t){t&&p(e),i[1](null)}}}let Xe=1;function et(i){return i>1e3?"#800026":i>120?"#723122":i>100?"#8B4225":i>75?"#A25626":i>40?"#B86B25":i>20?"#CA8323":i>10?"#DA9C20":i>5?"#E6B71E":i>=1?"#EED322":"white"}function tt(i){return{fillColor:et(i.properties.density),weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.7}}function st(i,e,t){let a,s,r,o,l=[20,15.8];ve(async()=>{s=(await Ue(()=>import("../chunks/leaflet-src.6c106d33.js").then(u=>u.l),["../chunks/leaflet-src.6c106d33.js","../chunks/_commonjsHelpers.de833af9.js"],import.meta.url)).default,a=s.map(r,{svgSprite:!1,preferCanvas:!1,zoomControl:!1,center:l,zoom:Xe}),a.doubleClickZoom.disable(),s.control.zoom({position:"topright"}).addTo(a);const d=await(await fetch(`${De.PUBLIC_BASEURL?De.PUBLIC_BASEURL:""}/countries.geo.json`)).json();M.subscribe(u=>{u.length>0&&(d.features.forEach(c=>{let h=u.filter(b=>b.countryIsoCode===c.id).reduce((b,_)=>b+_.sessions,0);c.properties.density=h}),a.eachLayer(c=>a.removeLayer(c)),o=s.geoJson(d,{style:tt,onEachFeature:(c,h)=>h.bindPopup(`${c.properties.name}: ${c.properties.density}`)}),o.addTo(a))})});function n(g){We[g?"unshift":"push"](()=>{r=g,t(0,r)})}return[r,n]}class at extends re{constructor(e){super(),ne(this,e,st,Qe,ae,{})}}function rt(i){let e,t="Devices :",a,s,r,o;return{c(){e=v("p"),e.textContent=t,a=A(),s=v("canvas"),this.h()},l(l){e=m(l,"P",{"data-svelte-h":!0}),ye(e)!=="svelte-1u9i28h"&&(e.textContent=t),a=P(l),s=m(l,"CANVAS",{id:!0,height:!0}),y(s).forEach(p),this.h()},h(){x(s,"id","devices-chart"),x(s,"height","400px")},m(l,n){T(l,e,n),T(l,a,n),T(l,s,n),r||(o=xe(s,"click",i[0]),r=!0)},p:I,i:I,o:I,d(l){l&&(p(e),p(a),p(s)),r=!1,o()}}}function nt(i,e,t){let a,s,r,o;V(i,_e,u=>t(3,a=u)),V(i,ee,u=>t(4,s=u)),V(i,be,u=>t(5,r=u)),V(i,M,u=>t(6,o=u));let l,n,g=["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"];ve(async()=>{const u=document.getElementById("devices-chart").getContext("2d");n=new me(u,{type:"doughnut",data:{labels:[],datasets:[{label:"My First dataset",backgroundColor:"",borderColor:"",data:[]}]},options:{}})}),M.subscribe(u=>{u.length>0&&n&&(l=u.reduce((c,h)=>(h.device in c?c[h.device]+=h.sessions:c[h.device]=h.sessions,c),{}),C(Object.keys(l),Object.values(l)))});function C(u,c){n.data.labels=u,n.data.datasets[0].data=c,n.data.datasets[0].backgroundColor=g.slice(0,u.length),n.data.datasets[0].borderColor=g.slice(0,u.length),n.update()}function d(u){const c=n.getElementsAtEvent(u);if(c[0]){const h=c[0]._index,b=Object.keys(l)[h];G(M,o=r.filter(_=>_.device===b),o),G(ee,s=a.filter(_=>_.device===b),s)}}return[d]}class lt extends re{constructor(e){super(),ne(this,e,nt,rt,ae,{})}}function it(i){let e,t="Provenance :",a,s,r,o;return{c(){e=v("p"),e.textContent=t,a=A(),s=v("canvas"),this.h()},l(l){e=m(l,"P",{"data-svelte-h":!0}),ye(e)!=="svelte-s7cod3"&&(e.textContent=t),a=P(l),s=m(l,"CANVAS",{id:!0,height:!0}),y(s).forEach(p),this.h()},h(){x(s,"id","provenances-chart"),x(s,"height","400px")},m(l,n){T(l,e,n),T(l,a,n),T(l,s,n),r||(o=xe(s,"click",i[0]),r=!0)},p:I,i:I,o:I,d(l){l&&(p(e),p(a),p(s)),r=!1,o()}}}function ot(i,e,t){let a,s,r,o;V(i,_e,u=>t(3,a=u)),V(i,ee,u=>t(4,s=u)),V(i,be,u=>t(5,r=u)),V(i,M,u=>t(6,o=u));let l,n,g=["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#fee0b6","#fdb863","#e08214","#b35806"];ve(async()=>{const u=document.getElementById("provenances-chart").getContext("2d");n=new me(u,{type:"horizontalBar",data:{labels:[],datasets:[{backgroundColor:"",borderColor:"",data:[]}]},options:{legend:{display:!1},tooltips:{mode:"nearest",intersect:!1}}})}),M.subscribe(u=>{u.length>0&&n&&(l=u.reduce((c,h)=>(h.pageReferrer in c?c[h.pageReferrer]+=h.sessions:c[h.pageReferrer]=h.sessions,c),{}),C(Object.keys(l),Object.values(l)))});function C(u,c){let h=u.map((b,_)=>({data:c[_],label:u[_]})).sort(function(b,_){return _.data-b.data}).reduce((b,_,D)=>(D>10||_.label==""?"Others"in b?b.Others+=_.data:b.Others=_.data:b[_.label]=_.data,b),{});n.data.labels=Object.keys(h),n.data.datasets[0].data=Object.values(h),n.data.datasets[0].backgroundColor=g.slice(0,u.length),n.data.datasets[0].borderColor=g.slice(0,u.length),n.update()}function d(u){const c=n.getElementsAtEvent(u);if(c[0]){const h=c[0]._index,b=Object.keys(l)[h];G(M,o=r.filter(_=>_.pageReferrer===b),o),G(ee,s=a.filter(_=>_.pageReferrer===b),s)}}return[d]}class ct extends re{constructor(e){super(),ne(this,e,ot,it,ae,{})}}function Le(i,e,t){const a=i.slice();return a[2]=e[t],a}function Ve(i){let e,t,a,s='<tr class="bg-gray-100 dark:bg-gray-800 "><th>Day</th> <th>Country</th> <th>City</th> <th>Page path</th> <th>Devices</th> <th>Referrer</th> <th>Sessions</th> <th>Users</th></tr>',r,o,l=je(Object.values(i[0])),n=[];for(let g=0;g<l.length;g+=1)n[g]=Be(Le(i,l,g));return{c(){e=v("div"),t=v("table"),a=v("thead"),a.innerHTML=s,r=A(),o=v("tbody");for(let g=0;g<n.length;g+=1)n[g].c();this.h()},l(g){e=m(g,"DIV",{class:!0});var C=y(e);t=m(C,"TABLE",{class:!0});var d=y(t);a=m(d,"THEAD",{"data-svelte-h":!0}),ye(a)!=="svelte-1ctfnuq"&&(a.innerHTML=s),r=P(d),o=m(d,"TBODY",{});var u=y(o);for(let c=0;c<n.length;c+=1)n[c].l(u);u.forEach(p),d.forEach(p),C.forEach(p),this.h()},h(){x(t,"class","w-full table-auto"),x(e,"class","overflow-x-auto ")},m(g,C){T(g,e,C),f(e,t),f(t,a),f(t,r),f(t,o);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(o,null)},p(g,C){if(C&1){l=je(Object.values(g[0]));let d;for(d=0;d<l.length;d+=1){const u=Le(g,l,d);n[d]?n[d].p(u,C):(n[d]=Be(u),n[d].c(),n[d].m(o,null))}for(;d<n.length;d+=1)n[d].d(1);n.length=l.length}},d(g){g&&p(e),Me(n,g)}}}function Be(i){let e,t,a=i[2].day.substring(6,8)+"",s,r,o=i[2].day.substring(4,6)+"",l,n,g=i[2].day.substring(0,4)+"",C,d,u,c=i[2].country+"",h,b,_,D=i[2].city+"",H,Y,R,K=i[2].pagePath+"",N,q,Q,z=i[2].device+"",F,fe,Z,L=i[2].pageReferrer+"",te,B,k,E=i[2].sessions+"",j,S,J,se=i[2].totalUsers+"",he,pe;return{c(){e=v("tr"),t=v("td"),s=w(a),r=w("/"),l=w(o),n=w("/"),C=w(g),d=A(),u=v("td"),h=w(c),b=A(),_=v("td"),H=w(D),Y=A(),R=v("td"),N=w(K),q=A(),Q=v("td"),F=w(z),fe=A(),Z=v("td"),te=w(L),B=A(),k=v("td"),j=w(E),S=A(),J=v("td"),he=w(se),pe=A(),this.h()},l(W){e=m(W,"TR",{class:!0});var $=y(e);t=m($,"TD",{});var X=y(t);s=O(X,a),r=O(X,"/"),l=O(X,o),n=O(X,"/"),C=O(X,g),X.forEach(p),d=P($),u=m($,"TD",{});var ge=y(u);h=O(ge,c),ge.forEach(p),b=P($),_=m($,"TD",{});var ke=y(_);H=O(ke,D),ke.forEach(p),Y=P($),R=m($,"TD",{});var Ce=y(R);N=O(Ce,K),Ce.forEach(p),q=P($),Q=m($,"TD",{});var $e=y(Q);F=O($e,z),$e.forEach(p),fe=P($),Z=m($,"TD",{});var Ee=y(Z);te=O(Ee,L),Ee.forEach(p),B=P($),k=m($,"TD",{});var we=y(k);j=O(we,E),we.forEach(p),S=P($),J=m($,"TD",{});var Oe=y(J);he=O(Oe,se),Oe.forEach(p),pe=P($),$.forEach(p),this.h()},h(){x(e,"class","hover:bg-blue-100 dark:hover:bg-blue-800")},m(W,$){T(W,e,$),f(e,t),f(t,s),f(t,r),f(t,l),f(t,n),f(t,C),f(e,d),f(e,u),f(u,h),f(e,b),f(e,_),f(_,H),f(e,Y),f(e,R),f(R,N),f(e,q),f(e,Q),f(Q,F),f(e,fe),f(e,Z),f(Z,te),f(e,B),f(e,k),f(k,j),f(e,S),f(e,J),f(J,he),f(e,pe)},p(W,$){$&1&&a!==(a=W[2].day.substring(6,8)+"")&&U(s,a),$&1&&o!==(o=W[2].day.substring(4,6)+"")&&U(l,o),$&1&&g!==(g=W[2].day.substring(0,4)+"")&&U(C,g),$&1&&c!==(c=W[2].country+"")&&U(h,c),$&1&&D!==(D=W[2].city+"")&&U(H,D),$&1&&K!==(K=W[2].pagePath+"")&&U(N,K),$&1&&z!==(z=W[2].device+"")&&U(F,z),$&1&&L!==(L=W[2].pageReferrer+"")&&U(te,L),$&1&&E!==(E=W[2].sessions+"")&&U(j,E),$&1&&se!==(se=W[2].totalUsers+"")&&U(he,se)},d(W){W&&p(e)}}}function dt(i){let e,t=i[0]&&Ve(i);return{c(){t&&t.c(),e=Pe()},l(a){t&&t.l(a),e=Pe()},m(a,s){t&&t.m(a,s),T(a,e,s)},p(a,[s]){a[0]?t?t.p(a,s):(t=Ve(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:I,o:I,d(a){a&&p(e),t&&t.d(a)}}}function ut(i,e,t){let a;return M.subscribe(s=>{s.length>0&&t(0,a=s.slice(0,20))}),[a]}class ft extends re{constructor(e){super(),ne(this,e,ut,dt,ae,{})}}function ht(i){let e,t,a,s;return{c(){e=v("p"),t=w("+ "),a=w(i[4]),s=w(" %"),this.h()},l(r){e=m(r,"P",{class:!0});var o=y(e);t=O(o,"+ "),a=O(o,i[4]),s=O(o," %"),o.forEach(p),this.h()},h(){x(e,"class","text-green-700 text dark:text-green-400")},m(r,o){T(r,e,o),f(e,t),f(e,a),f(e,s)},p(r,o){o&16&&U(a,r[4])},d(r){r&&p(e)}}}function pt(i){let e,t,a;return{c(){e=v("p"),t=w(i[4]),a=w(" %"),this.h()},l(s){e=m(s,"P",{class:!0});var r=y(e);t=O(r,i[4]),a=O(r," %"),r.forEach(p),this.h()},h(){x(e,"class","text-pink-700 text dark:text-pink-400")},m(s,r){T(s,e,r),f(e,t),f(e,a)},p(s,r){r&16&&U(t,s[4])},d(s){s&&p(e)}}}function gt(i){let e,t,a,s;return{c(){e=v("p"),t=w("+ "),a=w(i[5]),s=w(" %"),this.h()},l(r){e=m(r,"P",{class:!0});var o=y(e);t=O(o,"+ "),a=O(o,i[5]),s=O(o," %"),o.forEach(p),this.h()},h(){x(e,"class","text-green-700 text dark:text-green-400")},m(r,o){T(r,e,o),f(e,t),f(e,a),f(e,s)},p(r,o){o&32&&U(a,r[5])},d(r){r&&p(e)}}}function bt(i){let e,t,a;return{c(){e=v("p"),t=w(i[5]),a=w(" %"),this.h()},l(s){e=m(s,"P",{class:!0});var r=y(e);t=O(r,i[5]),a=O(r," %"),r.forEach(p),this.h()},h(){x(e,"class","text-pink-700 text dark:text-pink-400")},m(s,r){T(s,e,r),f(e,t),f(e,a)},p(s,r){r&32&&U(t,s[5])},d(s){s&&p(e)}}}function vt(i){let e,t,a,s,r,o,l,n,g,C,d,u,c,h,b,_,D,H,Y,R,K,N,q,Q,z,F;function fe(E,j){return E[4]<0?pt:ht}let Z=fe(i),L=Z(i);function te(E,j){return E[5]<0?bt:gt}let B=te(i),k=B(i);return{c(){e=v("nav"),t=v("div"),a=v("a"),s=v("h5"),r=w(i[0]),o=w(" sessions"),l=A(),n=v("p"),L.c(),g=A(),C=v("p"),d=w(i[2]),u=w(" last week"),c=A(),h=v("div"),b=v("a"),_=v("h5"),D=w(i[1]),H=w(" users"),Y=A(),R=v("p"),k.c(),K=A(),N=v("p"),q=w(i[3]),Q=w(" last week"),z=A(),F=v("br"),this.h()},l(E){e=m(E,"NAV",{class:!0});var j=y(e);t=m(j,"DIV",{class:!0});var S=y(t);a=m(S,"A",{href:!0,class:!0});var J=y(a);s=m(J,"H5",{class:!0});var se=y(s);r=O(se,i[0]),o=O(se," sessions"),se.forEach(p),l=P(J),n=m(J,"P",{class:!0});var he=y(n);L.l(he),he.forEach(p),g=P(J),C=m(J,"P",{});var pe=y(C);d=O(pe,i[2]),u=O(pe," last week"),pe.forEach(p),J.forEach(p),S.forEach(p),c=P(j),h=m(j,"DIV",{class:!0});var W=y(h);b=m(W,"A",{href:!0,class:!0});var $=y(b);_=m($,"H5",{class:!0});var X=y(_);D=O(X,i[1]),H=O(X," users"),X.forEach(p),Y=P($),R=m($,"P",{class:!0});var ge=y(R);k.l(ge),ge.forEach(p),K=P($),N=m($,"P",{});var ke=y(N);q=O(ke,i[3]),Q=O(ke," last week"),ke.forEach(p),$.forEach(p),W.forEach(p),j.forEach(p),z=P(E),F=m(E,"BR",{}),this.h()},h(){x(s,"class","mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"),x(n,"class","font-normal"),x(a,"href","#"),x(a,"class","block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"),x(t,"class","flex-initial"),x(_,"class","mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"),x(R,"class","font-normal"),x(b,"href","#"),x(b,"class","block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"),x(h,"class","flex-initial"),x(e,"class","flex justify-center gap-x-8")},m(E,j){T(E,e,j),f(e,t),f(t,a),f(a,s),f(s,r),f(s,o),f(a,l),f(a,n),L.m(n,null),f(a,g),f(a,C),f(C,d),f(C,u),f(e,c),f(e,h),f(h,b),f(b,_),f(_,D),f(_,H),f(b,Y),f(b,R),k.m(R,null),f(b,K),f(b,N),f(N,q),f(N,Q),T(E,z,j),T(E,F,j)},p(E,[j]){j&1&&U(r,E[0]),Z===(Z=fe(E))&&L?L.p(E,j):(L.d(1),L=Z(E),L&&(L.c(),L.m(n,null))),j&4&&U(d,E[2]),j&2&&U(D,E[1]),B===(B=te(E))&&k?k.p(E,j):(k.d(1),k=B(E),k&&(k.c(),k.m(R,null))),j&8&&U(q,E[3])},i:I,o:I,d(E){E&&(p(e),p(z),p(F)),L.d(),k.d()}}}function mt(i,e,t){let a,s,r,o,l,n;return M.subscribe(g=>{M.subscribe(C=>{g.length>0&&(t(0,a=g.reduce((d,u)=>d+u.sessions,0)),t(1,s=g.reduce((d,u)=>d+u.totalUsers,0)),t(2,r=C.reduce((d,u)=>d+u.sessions,0)),t(3,o=C.reduce((d,u)=>d+u.totalUsers,0)),t(4,l=Math.round(((a-r)/a+Number.EPSILON)*100)),t(5,n=Math.round(((s-o)/s+Number.EPSILON)*100)))})}),[a,s,r,o,l,n]}class _t extends re{constructor(e){super(),ne(this,e,mt,vt,ae,{})}}function yt(i){let e,t="Popular content:",a,s;return{c(){e=v("p"),e.textContent=t,a=A(),s=v("canvas"),this.h()},l(r){e=m(r,"P",{"data-svelte-h":!0}),ye(e)!=="svelte-1s4cb32"&&(e.textContent=t),a=P(r),s=m(r,"CANVAS",{id:!0}),y(s).forEach(p),this.h()},h(){x(s,"id","tags-chart")},m(r,o){T(r,e,o),T(r,a,o),T(r,s,o)},p:I,i:I,o:I,d(r){r&&(p(e),p(a),p(s))}}}function kt(i){let e,t;ve(async()=>{e=await Ne();const s=document.getElementById("tags-chart").getContext("2d");t=new me(s,{type:"bubble",data:{datasets:[{label:"",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:[]}]},options:{legend:{display:!1},tooltips:{mode:"nearest",intersect:!1,callbacks:{title(r,o){let{index:l}=r[0],{datasetIndex:n}=r[0],g=o.datasets[n].data[l].x,C=o.datasets[n].data[l].y;return o.datasets[n].data[l].tag,`Visits: ${C}, Posts: ${g}`},label(r,o){let{index:l}=r,{datasetIndex:n}=r;return`${o.datasets[n].data[l].tag}`}}},scales:{xAxes:[{id:"posts-x-axis",type:"linear",scaleLabel:{display:!0,labelString:"Number of posts"}}],yAxes:[{id:"visits-y-axis",type:"logarithmic",ticks:{userCallback(r){var o=r/Math.pow(10,Math.floor(me.helpers.log10(r)));return o===1||o===2||o===5?r.toString():""}},position:"left",scaleLabel:{display:!0,labelString:"Number of visits"}}]}}})}),M.subscribe(s=>{if(s.length>0&&e){let r=s.reduce((l,n)=>(n.pagePath in l?l[n.pagePath]+=n.sessions:l[n.pagePath]=n.sessions,l),{}),o=e.reduce((l,n)=>(n.link||n.tags.forEach(g=>{g in l?(l[g].count+=1,l[g].visits+=r[n.url]?r[n.url]:0):l[g]={tag:g,count:1,visits:r[n.url]?r[n.url]:0}}),l),{});a(Object.values(o))}});function a(s){t.data.datasets[0].data=s.map(r=>({x:r.count,y:r.visits,tag:r.tag,r:Math.log(r.visits/r.count*10+1)})),t.update()}return[]}class xt extends re{constructor(e){super(),ne(this,e,kt,yt,ae,{})}}function Se(i){let e,t='<svg aria-hidden="true" class="w-8 h-8 mr-2 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"></path></svg> <span class="sr-only">Loading...</span>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(a){e=m(a,"DIV",{role:!0,class:!0,"data-svelte-h":!0}),ye(e)!=="svelte-1hftwox"&&(e.innerHTML=t),this.h()},h(){x(e,"role","status"),x(e,"class","absolute -translate-x-1/2 -translate-y-1/2 top-2/4 left-1/2")},m(a,s){T(a,e,s)},d(a){a&&p(e)}}}function Ct(i){let e,t,a,s,r,o,l,n,g,C,d,u,c,h,b,_,D,H,Y,R,K,N,q,Q,z,F,fe,Z,L,te,B=i[0].length===0&&Se();return s=new _t({}),n=new Fe({}),d=new Je({}),h=new at({}),D=new Ke({}),R=new lt({}),q=new ct({}),F=new xt({}),L=new ft({}),{c(){e=v("section"),t=v("div"),B&&B.c(),a=A(),le(s.$$.fragment),r=A(),o=v("div"),l=v("div"),le(n.$$.fragment),g=A(),C=v("div"),le(d.$$.fragment),u=A(),c=v("div"),le(h.$$.fragment),b=A(),_=v("div"),le(D.$$.fragment),H=A(),Y=v("div"),le(R.$$.fragment),K=A(),N=v("div"),le(q.$$.fragment),Q=A(),z=v("div"),le(F.$$.fragment),fe=A(),Z=v("div"),le(L.$$.fragment),this.h()},l(k){e=m(k,"SECTION",{class:!0});var E=y(e);t=m(E,"DIV",{class:!0});var j=y(t);B&&B.l(j),a=P(j),ie(s.$$.fragment,j),r=P(j),o=m(j,"DIV",{class:!0});var S=y(o);l=m(S,"DIV",{class:!0});var J=y(l);ie(n.$$.fragment,J),J.forEach(p),g=P(S),C=m(S,"DIV",{class:!0});var se=y(C);ie(d.$$.fragment,se),se.forEach(p),u=P(S),c=m(S,"DIV",{class:!0});var he=y(c);ie(h.$$.fragment,he),he.forEach(p),b=P(S),_=m(S,"DIV",{class:!0});var pe=y(_);ie(D.$$.fragment,pe),pe.forEach(p),H=P(S),Y=m(S,"DIV",{class:!0});var W=y(Y);ie(R.$$.fragment,W),W.forEach(p),K=P(S),N=m(S,"DIV",{class:!0});var $=y(N);ie(q.$$.fragment,$),$.forEach(p),Q=P(S),z=m(S,"DIV",{class:!0});var X=y(z);ie(F.$$.fragment,X),X.forEach(p),fe=P(S),Z=m(S,"DIV",{class:!0});var ge=y(Z);ie(L.$$.fragment,ge),ge.forEach(p),S.forEach(p),j.forEach(p),E.forEach(p),this.h()},h(){x(l,"class","col-span-3 sm:col-span-1"),x(C,"class","col-span-3 sm:col-span-1"),x(c,"class","col-span-3 sm:col-span-1"),x(_,"class","col-span-3 sm:col-span-1"),x(Y,"class","col-span-3 sm:col-span-1"),x(N,"class","col-span-3 sm:col-span-1"),x(z,"class","col-span-3 sm:col-span-1"),x(Z,"class","col-span-3 sm:col-span-3"),x(o,"class","grid grid-cols-3 gap-5"),x(t,"class","w-full"),x(e,"class","px-8 dark:bg-gray-900 dark:text-gray-300")},m(k,E){T(k,e,E),f(e,t),B&&B.m(t,null),f(t,a),oe(s,t,null),f(t,r),f(t,o),f(o,l),oe(n,l,null),f(o,g),f(o,C),oe(d,C,null),f(o,u),f(o,c),oe(h,c,null),f(o,b),f(o,_),oe(D,_,null),f(o,H),f(o,Y),oe(R,Y,null),f(o,K),f(o,N),oe(q,N,null),f(o,Q),f(o,z),oe(F,z,null),f(o,fe),f(o,Z),oe(L,Z,null),te=!0},p(k,[E]){k[0].length===0?B||(B=Se(),B.c(),B.m(t,a)):B&&(B.d(1),B=null)},i(k){te||(ce(s.$$.fragment,k),ce(n.$$.fragment,k),ce(d.$$.fragment,k),ce(h.$$.fragment,k),ce(D.$$.fragment,k),ce(R.$$.fragment,k),ce(q.$$.fragment,k),ce(F.$$.fragment,k),ce(L.$$.fragment,k),te=!0)},o(k){de(s.$$.fragment,k),de(n.$$.fragment,k),de(d.$$.fragment,k),de(h.$$.fragment,k),de(D.$$.fragment,k),de(R.$$.fragment,k),de(q.$$.fragment,k),de(F.$$.fragment,k),de(L.$$.fragment,k),te=!1},d(k){k&&p(e),B&&B.d(),ue(s),ue(n),ue(d),ue(h),ue(D),ue(R),ue(q),ue(F),ue(L)}}}function $t(i,e,t){let a;return V(i,be,s=>t(0,a=s)),[a]}class Et extends re{constructor(e){super(),ne(this,e,$t,Ct,ae,{})}}function wt(i){let e,t=`<div class="w-full p-4 mx-auto max-w-screen-xl md:py-8"><hr class="my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8"/>

			This dashboard shows the traffic data from <a href="https://cristianpb.github.io">cristianpb.github.io</a>. The code source of this dashboard is published in
			<a class="is-danger" href="https://github.com/cristianpb/analytics-google">this github repository</a></div>`;return{c(){e=v("footer"),e.innerHTML=t,this.h()},l(a){e=m(a,"FOOTER",{class:!0,"data-svelte-h":!0}),ye(e)!=="svelte-kgds1s"&&(e.innerHTML=t),this.h()},h(){x(e,"class","m-4 bg-white rounded-lg shadow dark:bg-gray-900 dark:text-gray-300")},m(a,s){T(a,e,s)},p:I,i:I,o:I,d(a){a&&p(e)}}}class Ot extends re{constructor(e){super(),ne(this,e,null,wt,ae,{})}}function At(i){let e,t,a,s,r,o;return a=new Et({}),r=new Ot({}),{c(){e=A(),t=v("div"),le(a.$$.fragment),s=A(),le(r.$$.fragment),this.h()},l(l){Re("svelte-35vdxi",document.head).forEach(p),e=P(l),t=m(l,"DIV",{class:!0});var g=y(t);ie(a.$$.fragment,g),s=P(g),ie(r.$$.fragment,g),g.forEach(p),this.h()},h(){document.title="Analytics - Cristian Perez Brokate",x(t,"class","app dark:bg-gray-900 dark:text-gray-300")},m(l,n){T(l,e,n),T(l,t,n),oe(a,t,null),f(t,s),oe(r,t,null),o=!0},p:I,i(l){o||(ce(a.$$.fragment,l),ce(r.$$.fragment,l),o=!0)},o(l){de(a.$$.fragment,l),de(r.$$.fragment,l),o=!1},d(l){l&&(p(e),p(t)),ue(a),ue(r)}}}function Pt(i,e,t){let a,s,r,o;return V(i,ee,l=>t(0,a=l)),V(i,_e,l=>t(1,s=l)),V(i,M,l=>t(2,r=l)),V(i,be,l=>t(3,o=l)),ve(async()=>{const l=await Te(0),n=await Te(7);G(be,o=l,o),G(M,r=l,r),G(_e,s=n,s),G(ee,a=n,a)}),[]}class Bt extends re{constructor(e){super(),ne(this,e,Pt,At,ae,{})}}export{Bt as component};
